=== IntelliFlow CRM - Prisma Schema Validation ===
Timestamp: 2025-12-14T23:45:00+00:00
Database: PostgreSQL 16.11 (pgvector enabled)

--- Test 1: Prisma Client Generation ---
Command: pnpm db:generate
Version: Prisma v5.22.0
Status: Generated successfully
Output: ./node_modules/.pnpm/@prisma+client@5.22.0
Result: PASS

--- Test 2: Package Build ---
Command: pnpm build
Outputs:
  - dist/index.js (2.45 KB)
  - dist/client.js (1.69 KB)
  - dist/index.mjs (472 B)
  - dist/client.mjs (180 B)
  - dist/index.d.ts (365 B)
  - dist/client.d.ts (695 B)
Build Time: 4.5s
Result: PASS

--- Test 3: Schema Models ---
Models defined:
  1. User (with UserRole enum)
  2. Lead (with embedding vector(1536))
  3. Contact (with embedding vector(1536))
  4. Account
  5. Opportunity
  6. Task
  7. AIScore
  8. AuditLog
  9. DomainEvent
Total: 9 models
Result: PASS

--- Test 4: Schema Enums ---
Enums defined:
  - UserRole (USER, ADMIN, MANAGER, SALES_REP)
  - LeadSource (WEBSITE, REFERRAL, SOCIAL, EMAIL, COLD_CALL, EVENT, OTHER)
  - LeadStatus (NEW, CONTACTED, QUALIFIED, UNQUALIFIED, CONVERTED, LOST)
  - OpportunityStage (PROSPECTING, QUALIFICATION, NEEDS_ANALYSIS, PROPOSAL, NEGOTIATION, CLOSED_WON, CLOSED_LOST)
  - TaskPriority (LOW, MEDIUM, HIGH, URGENT)
  - TaskStatus (PENDING, IN_PROGRESS, COMPLETED, CANCELLED)
  - EventStatus (PENDING, PROCESSING, PROCESSED, FAILED)
Total: 7 enums
Result: PASS

--- Test 5: pgvector Configuration ---
Extension: postgresqlExtensions (preview feature enabled)
Extensions: [vector, uuid_ossp]
Embedding columns:
  - Lead.embedding: vector(1536)
  - Contact.embedding: vector(1536)
Result: PASS

--- Test 6: Index Configuration ---
User indexes: 2 (email, role)
Lead indexes: 5 (email, status, score, ownerId, createdAt)
Contact indexes: 3 (email, ownerId, accountId)
Account indexes: 2 (name, ownerId)
Opportunity indexes: 4 (stage, ownerId, accountId, expectedCloseDate)
Task indexes: 3 (status, ownerId, dueDate)
AIScore indexes: 2 (leadId, createdAt)
AuditLog indexes: 3 (entityType+entityId, userId, createdAt)
DomainEvent indexes: 4 (eventType, aggregateType+aggregateId, status, occurredAt)
Total: 28 indexes
Result: PASS

=== All Tests Completed ===
Total: 6 | Passed: 6 | Failed: 0
