# Task Execution Prompt

Implement the selected task(s) with TDD, brand/page/sitemap, and flow context.

## IFC-058 – GDPR baseline controls: Supabase RLS policies, data minimisation, retention hooks

**Sprint:** 11
**Section:** Compliance
**Owner:** DPO + Legal (STOA-Foundation)
**Status:** Backlog

You must adhere to the following guidelines while implementing this task: .specify/memory/constitution.md

### Dependencies
- IFC-017
- IFC-127
- IFC-008

Dependency Status:
- IFC-017 (DONE)
- IFC-127 (DONE)
- IFC-008 (DONE)

### Pre-requisites
FILE:artifacts/sprint0/codex-run/Framework.md;FILE:audit-matrix.yml;POLICY:RLS policies defined;POLICY:data flows mapped;FILE:docs/planning/adr/ADR-001-modern-stack.md;FILE:docs/planning/adr/ADR-007-data-governance.md;FILE:docs/security/zero-trust-design.md;FILE:docs/shared/review-checklist.md;FILE:docs/operations/quality-gates.md;FILE:docs/operations/pr-checklist.md;FILE:packages/db/src/client.ts;FILE:infra/supabase/rls-policies.sql;FILE:artifacts/reports/compliance-report.md

### Definition of Done
1. Row Level Security implemented, privacy by design
2. artifacts: gdpr-compliance-checklist.xlsx, audit-trail-test.json, context_ack.json

### Artifacts to Track
- ARTIFACT:artifacts/reports/gdpr-compliance-checklist.xlsx
- ARTIFACT:artifacts/misc/audit-trail-test.json
- EVIDENCE:artifacts/attestations/IFC-058/context_ack.json

### Validation
AUDIT:manual-review;AUDIT:security-review

### Brand / UX / Flows References
- Brand: docs/company/brand/style-guide.md
- Page Registry: docs/design/page-registry.md
- Sitemap: docs/design/sitemap.md
- Check the relevant Flows: apps/project-tracker/docs/metrics/_global/flows/

### Context Controls
- Build context pack and context ack before coding.
- Evidence folder: artifacts/attestations/<task_id>/
- Use spec/plan if present under .specify/.

---

## PG-001 – Home Page

**Sprint:** 11
**Section:** Public Pages
**Owner:** Growth FE (STOA-Foundation)
**Status:** Backlog

You must adhere to the following guidelines while implementing this task: .specify/memory/constitution.md

### Dependencies
- IFC-076
- GTM-002
- BRAND-001

Dependency Status:
- IFC-076 (DONE)
- GTM-002 (DONE)
- BRAND-001 (DONE)

### Pre-requisites
FILE:docs/design/page-registry.md;FILE:artifacts/sprint0/codex-run/Framework.md;FILE:audit-matrix.yml;POLICY:Design approved;ENV:content ready;FILE:artifacts/misc/accessibility-audit.json;FILE:docs/company/messaging/positioning.md;FILE:docs/company/brand/visual-identity.md;FILE:docs/company/brand/style-guide.md;FILE:docs/company/brand/dos-and-donts.md;FILE:docs/company/brand/accessibility-patterns.md

### Definition of Done
1. Response <200ms, Lighthouse ≥90, SEO optimized
2. artifacts: page.tsx, loading.tsx, error.tsx
3. gates: lighthouse-gte-90

### Artifacts to Track
- ARTIFACT:apps/web/app/(public)/page.tsx
- ARTIFACT:apps/web/app/(public)/loading.tsx
- ARTIFACT:apps/web/app/(public)/error.tsx
- ARTIFACT:artifacts/misc/seo-meta.json
- EVIDENCE:artifacts/attestations/PG-001/context_ack.json

### Validation
GATE:lighthouse-gte-90

### Brand / UX / Flows References
- Brand: docs/company/brand/style-guide.md
- Page Registry: docs/design/page-registry.md
- Sitemap: docs/design/sitemap.md
- Check the relevant Flows: apps/project-tracker/docs/metrics/_global/flows/

### Context Controls
- Build context pack and context ack before coding.
- Evidence folder: artifacts/attestations/<task_id>/
- Use spec/plan if present under .specify/.

---

## IFC-125 – Implement guardrails for prompt injection, data leakage, and monitor AI bias

**Sprint:** 11
**Section:** AI Foundation
**Owner:** AI Specialist + Security (STOA-Security)
**Status:** Backlog

You must adhere to the following guidelines while implementing this task: .specify/memory/constitution.md

### Dependencies
- IFC-005
- IFC-008

Dependency Status:
- IFC-005 (DONE)
- IFC-008 (DONE)

### Pre-requisites
FILE:artifacts/sprint0/codex-run/Framework.md;FILE:audit-matrix.yml;ENV:AI models integrated;FILE:docs/planning/adr/ADR-007-data-governance.md;FILE:docs/shared/review-checklist.md;FILE:docs/operations/pr-checklist.md;FILE:apps/ai-worker/src/chains/scoring.chain.ts;FILE:artifacts/reports/compliance-report.md

### Definition of Done
1. Prompt sanitization, output redaction, bias detection metrics
2. incidents logged
3. artifacts: prompt-sanitizer.ts, bias-metrics.csv, ai-guardrails-report.md
4. targets: zero errors
5. verified by: pnpm test

### Artifacts to Track
- ARTIFACT:apps/api/src/shared/prompt-sanitizer.ts
- ARTIFACT:artifacts/metrics/bias-metrics.csv
- ARTIFACT:docs/shared/ai-guardrails-report.md
- EVIDENCE:artifacts/attestations/IFC-125/context_ack.json

### Validation
VALIDATE:pnpm test

### Brand / UX / Flows References
- Brand: docs/company/brand/style-guide.md
- Page Registry: docs/design/page-registry.md
- Sitemap: docs/design/sitemap.md
- Check the relevant Flows: apps/project-tracker/docs/metrics/_global/flows/

### Context Controls
- Build context pack and context ack before coding.
- Evidence folder: artifacts/attestations/<task_id>/
- Use spec/plan if present under .specify/.

---

## IFC-140 – Implement data governance workflows: DSAR requests; retention & legal hold policies; tenant-specific encryption key management; data residency compliance

**Sprint:** 11
**Section:** Compliance
**Owner:** Legal Ops + Security Eng (STOA-Security)
**Status:** Backlog

You must adhere to the following guidelines while implementing this task: .specify/memory/constitution.md

### Dependencies
- IFC-098
- IFC-127

Dependency Status:
- IFC-098 (DONE)
- IFC-127 (DONE)

### Pre-requisites
FILE:artifacts/sprint0/codex-run/Framework.md;FILE:audit-matrix.yml;ENV:Data classification policy defined; KMS configured;FILE:docs/planning/adr/ADR-004-multi-tenancy.md;FILE:docs/planning/adr/ADR-005-workflow-engine.md;FILE:docs/planning/adr/ADR-007-data-governance.md;FILE:docs/planning/adr/ADR-008-audit-logging.md;FILE:docs/operations/quality-gates.md;FILE:docs/architecture/decision-workflow.md;FILE:packages/db/prisma/schema-audit.prisma;FILE:infra/supabase/rls-policies.sql

### Definition of Done
1. DSAR workflow implemented with identity verification
2. retention schedules enforced per entity
3. legal hold exceptions
4. per-tenant key management with rotation
5. residency controls and subprocessor registry
6. documentation and tests
7. targets: >=100%

### Artifacts to Track
- ARTIFACT:docs/data-governance/dsar-process.md
- ARTIFACT:docs/data-governance/retention-policy.md
- ARTIFACT:artifacts/misc/kms-key-config.json
- ARTIFACT:apps/api/src/workflow/dsar-workflow.ts
- ARTIFACT:artifacts/misc/compliance-tests/data-governance.spec.ts
- EVIDENCE:artifacts/attestations/IFC-140/context_ack.json

### Validation
AUDIT:manual-review;VALIDATE:pnpm test

### Brand / UX / Flows References
- Brand: docs/company/brand/style-guide.md
- Page Registry: docs/design/page-registry.md
- Sitemap: docs/design/sitemap.md
- Check the relevant Flows: apps/project-tracker/docs/metrics/_global/flows/

### Context Controls
- Build context pack and context ack before coding.
- Evidence folder: artifacts/attestations/<task_id>/
- Use spec/plan if present under .specify/.

---

## IFC-152 – Case document model: storage metadata, versioning, ACL mapping (tenant + case + role), and audit hooks

**Sprint:** 11
**Section:** Case Docs
**Owner:** Backend Dev + Domain Architect (STOA-Intelligence)
**Status:** Backlog

You must adhere to the following guidelines while implementing this task: .specify/memory/constitution.md

### Dependencies
- IFC-136
- IFC-127
- IFC-094

Dependency Status:
- IFC-136 (DONE)
- IFC-127 (DONE)
- IFC-094 (DONE)

### Pre-requisites
FILE:artifacts/sprint0/codex-run/Framework.md;FILE:audit-matrix.yml;ENV:Case/Matter domain exists; tenant isolation enforced; base document management available;FILE:docs/planning/adr/ADR-004-multi-tenancy.md;FILE:docs/planning/adr/ADR-007-data-governance.md;FILE:docs/planning/adr/ADR-008-audit-logging.md;FILE:packages/db/prisma/schema.prisma;FILE:packages/domain/src/legal/cases/Case.ts;FILE:infra/supabase/rls-policies.sql;FILE:artifacts/reports/e-signature-test.pdf

### Definition of Done
1. CaseDocument aggregate and repository implemented
2. ACL mapping rules defined
3. versioning semantics
4. audit events on read/write
5. tests
6. targets: >=100%, >=100%, <50ms

### Artifacts to Track
- ARTIFACT:packages/domain/src/legal/cases/case-document.ts
- ARTIFACT:packages/db/prisma/case-document.sql
- ARTIFACT:apps/api/src/modules/crm/documents.router.ts
- EVIDENCE:artifacts/attestations/IFC-152/context_ack.json

### Validation
VALIDATE:pnpm test

### Brand / UX / Flows References
- Brand: docs/company/brand/style-guide.md
- Page Registry: docs/design/page-registry.md
- Sitemap: docs/design/sitemap.md
- Check the relevant Flows: apps/project-tracker/docs/metrics/_global/flows/

### Context Controls
- Build context pack and context ack before coding.
- Evidence folder: artifacts/attestations/<task_id>/
- Use spec/plan if present under .specify/.

---

## Delivery Checklist
- Follow TDD: write/extend tests before implementation.
- Respect Definition of Done and produce required artifacts.
- Run lint/typecheck/test/build/security scans.
- Attach evidence (context_pack, context_ack, summaries).