# IntelliFlow CRM - Environment Variables Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env files with actual secrets to version control

# ==============================================================================
# VAULT CONFIGURATION
# ==============================================================================
# HashiCorp Vault settings for secrets management
VAULT_ADDR=https://vault.intelliflow.local:8200
VAULT_NAMESPACE=intelliflow
VAULT_TOKEN=<your-vault-token>
VAULT_ROLE_ID=<your-role-id>
VAULT_SECRET_ID=<your-secret-id>

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
# Primary PostgreSQL database (managed via Supabase)
DATABASE_URL=postgresql://user:password@localhost:5432/intelliflow?schema=public
DATABASE_DIRECT_URL=postgresql://user:password@localhost:5432/intelliflow?schema=public
DATABASE_POOL_SIZE=20
DATABASE_SSL_MODE=require

# Supabase configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=<your-anon-key>
SUPABASE_SERVICE_ROLE_KEY=<your-service-role-key>
SUPABASE_JWT_SECRET=<your-jwt-secret>
SUPABASE_PROJECT_REF=<your-project-ref>

# Supabase Storage configuration
SUPABASE_STORAGE_URL=https://your-project.supabase.co/storage/v1
SUPABASE_MAX_FILE_SIZE=52428800

# Supabase Edge Functions (for local development)
SUPABASE_FUNCTIONS_URL=http://127.0.0.1:54321/functions/v1

# Redis configuration (for caching and rate limiting)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=<your-redis-password>
REDIS_TLS_ENABLED=false

# ==============================================================================
# AI / LLM CONFIGURATION
# ==============================================================================
# OpenAI API configuration
OPENAI_API_KEY=sk-...
OPENAI_ORGANIZATION=<your-org-id>
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Ollama configuration (for local development)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# LangChain configuration
LANGCHAIN_API_KEY=<your-langchain-key>
LANGCHAIN_PROJECT=intelliflow-crm
LANGCHAIN_TRACING_V2=true
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com

# ==============================================================================
# AUTHENTICATION & AUTHORIZATION
# ==============================================================================
# NextAuth.js configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=<generate-with-openssl-rand-base64-32>

# JWT configuration
JWT_SECRET=<your-jwt-secret>
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d

# OAuth providers (optional)
GOOGLE_CLIENT_ID=<your-google-client-id>
GOOGLE_CLIENT_SECRET=<your-google-client-secret>
GITHUB_CLIENT_ID=<your-github-client-id>
GITHUB_CLIENT_SECRET=<your-github-client-secret>

# ==============================================================================
# API CONFIGURATION
# ==============================================================================
# tRPC API server
API_PORT=3001
API_HOST=0.0.0.0
API_CORS_ORIGIN=http://localhost:3000

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ==============================================================================
# FRONTEND CONFIGURATION
# ==============================================================================
# Next.js web application
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=<your-anon-key>
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ==============================================================================
# OBSERVABILITY & MONITORING
# ==============================================================================
# Sentry error tracking
SENTRY_DSN=<your-sentry-dsn>
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# OpenTelemetry configuration
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=intelliflow-crm
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# Grafana/Prometheus
PROMETHEUS_PORT=9090
GRAFANA_URL=http://localhost:3000

# PagerDuty integration
PAGERDUTY_API_KEY=<your-pagerduty-key>
PAGERDUTY_SERVICE_ID=<your-service-id>

# ==============================================================================
# DEPLOYMENT CONFIGURATION
# ==============================================================================
# Environment identifier
NODE_ENV=development
ENVIRONMENT=local

# Docker configuration
DOCKER_REGISTRY=ghcr.io
DOCKER_IMAGE_TAG=latest

# Kubernetes (if applicable)
K8S_NAMESPACE=intelliflow
K8S_CLUSTER_NAME=production

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================
# Enable/disable features for testing
FEATURE_AI_SCORING_ENABLED=true
FEATURE_EMAIL_AUTOMATION_ENABLED=false
FEATURE_ANALYTICS_ENABLED=true
FEATURE_EXPERIMENTAL_UI=false

# ==============================================================================
# EXTERNAL INTEGRATIONS
# ==============================================================================
# Email service (SendGrid, AWS SES, etc.)
EMAIL_PROVIDER=sendgrid
EMAIL_API_KEY=<your-email-api-key>
EMAIL_FROM_ADDRESS=noreply@intelliflow.com
EMAIL_FROM_NAME=IntelliFlow CRM

# SMS service (Twilio)
TWILIO_ACCOUNT_SID=<your-twilio-account-sid>
TWILIO_AUTH_TOKEN=<your-twilio-auth-token>
TWILIO_PHONE_NUMBER=<your-twilio-phone>

# File storage (AWS S3, GCS, etc.)
STORAGE_PROVIDER=s3
AWS_ACCESS_KEY_ID=<your-aws-access-key>
AWS_SECRET_ACCESS_KEY=<your-aws-secret-key>
AWS_REGION=us-east-1
AWS_S3_BUCKET=intelliflow-uploads

# ==============================================================================
# DEVELOPMENT TOOLS
# ==============================================================================
# Debug mode
DEBUG=false
LOG_LEVEL=info

# Testing
TEST_DATABASE_URL=postgresql://test:test@localhost:5433/intelliflow_test
TEST_REDIS_URL=redis://localhost:6380

# ==============================================================================
# SECURITY SETTINGS
# ==============================================================================
# Encryption keys
ENCRYPTION_KEY=<generate-with-openssl-rand-hex-32>
ENCRYPTION_ALGORITHM=aes-256-gcm

# CORS configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Cookie settings
COOKIE_SECURE=false
COOKIE_SAME_SITE=lax
COOKIE_DOMAIN=localhost

# ==============================================================================
# PERFORMANCE TUNING
# ==============================================================================
# Connection pooling
DATABASE_MIN_POOL_SIZE=2
DATABASE_MAX_POOL_SIZE=20
DATABASE_IDLE_TIMEOUT=30000

# Caching
CACHE_TTL=3600
CACHE_MAX_SIZE=100

# AI request timeouts
AI_REQUEST_TIMEOUT=30000
AI_MAX_RETRIES=3
AI_RETRY_DELAY=1000
