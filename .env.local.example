# IntelliFlow CRM - Local Development Environment Variables
# Copy this file to .env.local and fill in your actual values
# This file is optimized for local development with minimal external dependencies

# ==============================================================================
# DATABASE CONFIGURATION (Local Docker)
# ==============================================================================
# Local PostgreSQL via Docker Compose
DATABASE_URL=postgresql://intelliflow:intelliflow_dev@localhost:5432/intelliflow_dev?schema=public
DATABASE_DIRECT_URL=postgresql://intelliflow:intelliflow_dev@localhost:5432/intelliflow_dev?schema=public
DATABASE_POOL_SIZE=10
DATABASE_SSL_MODE=disable

# Supabase Local Development
# Run: npx supabase start
SUPABASE_URL=http://127.0.0.1:54321
SUPABASE_ANON_KEY=<your-anon-key>
SUPABASE_SERVICE_ROLE_KEY=<your-service-role-key>
SUPABASE_JWT_SECRET=super-secret-jwt-token-with-at-least-32-characters-long
SUPABASE_STORAGE_URL=http://127.0.0.1:54321/storage/v1
SUPABASE_FUNCTIONS_URL=http://127.0.0.1:54321/functions/v1

# Redis (Local Docker)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_TLS_ENABLED=false

# ==============================================================================
# AI / LLM CONFIGURATION (Local Development)
# ==============================================================================
# Ollama for local AI development (free, no API key needed)
# Install: https://ollama.ai
# Run: ollama serve
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# OpenAI (Optional - use for production-like testing)
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORGANIZATION=
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# LangChain (Optional - for debugging/tracing)
LANGCHAIN_API_KEY=
LANGCHAIN_PROJECT=intelliflow-local
LANGCHAIN_TRACING_V2=false
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com

# ==============================================================================
# AUTHENTICATION & AUTHORIZATION
# ==============================================================================
# NextAuth.js configuration
NEXTAUTH_URL=http://localhost:3000
# Generate secret: openssl rand -base64 32
NEXTAUTH_SECRET=local-dev-secret-change-me-in-production-min-32-chars

# JWT configuration
JWT_SECRET=local-jwt-secret-change-me-in-production-min-32-chars
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d

# OAuth providers (Optional for local dev)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# ==============================================================================
# API CONFIGURATION
# ==============================================================================
# tRPC API server
API_PORT=3001
API_HOST=0.0.0.0
API_CORS_ORIGIN=http://localhost:3000

# Rate limiting (relaxed for local dev)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# ==============================================================================
# FRONTEND CONFIGURATION
# ==============================================================================
# Next.js web application
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=<your-anon-key>
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ==============================================================================
# OBSERVABILITY & MONITORING (Disabled for local dev)
# ==============================================================================
# Sentry error tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=local
SENTRY_TRACES_SAMPLE_RATE=0

# OpenTelemetry (optional)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=intelliflow-local
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0

# ==============================================================================
# DEPLOYMENT CONFIGURATION
# ==============================================================================
# Environment identifier
NODE_ENV=development
ENVIRONMENT=local

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================
# Enable/disable features for local testing
FEATURE_AI_SCORING_ENABLED=true
FEATURE_EMAIL_AUTOMATION_ENABLED=false
FEATURE_ANALYTICS_ENABLED=true
FEATURE_EXPERIMENTAL_UI=true

# ==============================================================================
# EXTERNAL INTEGRATIONS (Disabled for local dev)
# ==============================================================================
# Email service (use console logging instead)
EMAIL_PROVIDER=console
EMAIL_API_KEY=
EMAIL_FROM_ADDRESS=dev@localhost
EMAIL_FROM_NAME=IntelliFlow CRM (Dev)

# SMS service
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# File storage (use local filesystem)
STORAGE_PROVIDER=local
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=

# ==============================================================================
# DEVELOPMENT TOOLS
# ==============================================================================
# Debug mode
DEBUG=true
LOG_LEVEL=debug

# Testing
TEST_DATABASE_URL=postgresql://intelliflow:intelliflow_test@localhost:5433/intelliflow_test
TEST_REDIS_URL=redis://localhost:6380

# ==============================================================================
# SECURITY SETTINGS
# ==============================================================================
# Encryption keys (use simple values for local dev)
# Generate: openssl rand -hex 32
ENCRYPTION_KEY=local-encryption-key-min-32-characters-long-for-dev
ENCRYPTION_ALGORITHM=aes-256-gcm

# CORS configuration (permissive for local dev)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Cookie settings (insecure for local dev)
COOKIE_SECURE=false
COOKIE_SAME_SITE=lax
COOKIE_DOMAIN=localhost

# ==============================================================================
# PERFORMANCE TUNING
# ==============================================================================
# Connection pooling
DATABASE_MIN_POOL_SIZE=2
DATABASE_MAX_POOL_SIZE=10
DATABASE_IDLE_TIMEOUT=30000

# Caching (relaxed for local dev)
CACHE_TTL=300
CACHE_MAX_SIZE=50

# AI request timeouts (generous for local models)
AI_REQUEST_TIMEOUT=60000
AI_MAX_RETRIES=3
AI_RETRY_DELAY=1000

# ==============================================================================
# VAULT CONFIGURATION (Not needed for local dev)
# ==============================================================================
# HashiCorp Vault is only used in production
VAULT_ADDR=
VAULT_NAMESPACE=
VAULT_TOKEN=
VAULT_ROLE_ID=
VAULT_SECRET_ID=
